"use strict";(self.webpackChunktest_reactjs=self.webpackChunktest_reactjs||[]).push([[171],{4171:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(2791),n=s(5294),i=s(184);const c={Speed:{type:"int"},date:{type:Date,default:Date.now}},d=e=>"string"!==typeof e||e.trim().length<1;function l(){const[e,t]=(0,a.useState)(c),[s,l]=(0,a.useState)({}),[o,r]=(0,a.useState)(!1),p=()=>{r(!o)};console.log(s);const[h,u]=(0,a.useState)([]),[S,m]=(0,a.useState)([]);(0,a.useEffect)((()=>{j()}),[]);const j=()=>{fetch("https://asia-south1.gcp.data.mongodb-api.com/app/application-0-iatxy/endpoint/GET_LIST_SPEED").then((e=>e.json())).then((e=>{u(e[0].public.input.jsondata),m(e[0].public.input.jsondata)})).catch((e=>{console.error("Fetch error:",e)}))};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"title",children:[(0,i.jsx)("i",{className:"uil uil-tachometer-fast-alt"}),(0,i.jsx)("span",{className:"text",children:"Speed"})]}),(0,i.jsx)("div",{className:"Speed-input1",children:(0,i.jsxs)("div",{className:"Speed-iput-container1",children:[(0,i.jsx)("h1",{className:"",children:"Desired Engine Speed"}),(0,i.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const s=(new Date).toISOString();if((()=>{const t={};return d(e.Speed)?t.Speed="Speed is required":(e.Speed<500||e.Speed>5e3)&&(t.Speed="Vui l\xf2ng nh\u1eadp gi\xe1 tr\u1ecb t\u1eeb 500 \u0111\u1ebfn 5000"),l(t),0===Object.keys(t).length})())try{const t={speed:e.Speed,date:s},a=await n.Z.post("https://asia-south1.gcp.data.mongodb-api.com/app/application-0-iatxy/endpoint/POST_SPEED",t),i=await n.Z.post("https://asia-south1.gcp.data.mongodb-api.com/app/application-0-iatxy/endpoint/test",e);console.log("\u0110\xe3 g\u1eedi d\u1eef li\u1ec7u th\xe0nh c\xf4ng:",a.data),console.log("\u0110\xe3 g\u1eedi d\u1eef li\u1ec7u th\xe0nh c\xf4ng:",i.data),j(),p()}catch(a){console.error("L\u1ed7i khi g\u1eedi d\u1eef li\u1ec7u:",a)}else console.log("form invalid")},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"Speed",className:"form-label1",children:"Enter Speed:"}),(0,i.jsx)("input",{id:"Speed",className:"form-control",type:"number",name:"speed",value:e.Speed,onChange:s=>{const{value:a}=s.target;t({...e,Speed:a,date:(new Date).toISOString()})}}),s.Speed&&(0,i.jsx)("div",{className:"error-feedback",children:s.Speed})]}),(0,i.jsx)("div",{className:"center-align11",children:(0,i.jsx)("button",{type:"submit",className:"button3",children:"Submit"})})]})]})}),o&&(0,i.jsx)("div",{className:"modal",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsx)("i",{class:"uil uil-check-circle modalicon",style:{width:"200px"}}),(0,i.jsx)("h2",{children:"Success"}),(0,i.jsxs)("p",{children:["Current Speed: ",e.Speed]}),(0,i.jsx)("button",{className:"modal-close",onClick:p,children:"Close"})]})}),(0,i.jsxs)("div",{className:"title",children:[(0,i.jsx)("i",{className:"uil uil-tachometer-fast-alt"}),(0,i.jsx)("span",{className:"text",children:"Speed History"})]}),(0,i.jsxs)("table",{style:{marginTop:"20px"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Type"}),(0,i.jsx)("th",{children:"Last Speed"}),(0,i.jsx)("th",{children:"Last Time "})]})}),(0,i.jsx)("tbody",{children:Object.values(S).sort(((e,t)=>new Date(t.date)-new Date(e.date))).slice(0,10).map((e=>{const t=new Date(e.date),s="".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0")," ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"),":").concat(t.getSeconds().toString().padStart(2,"0"));return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Stepper Motor"}),(0,i.jsx)("td",{children:e.speed}),(0,i.jsx)("td",{children:s})]},e.id)}))})]})]})}}}]);
//# sourceMappingURL=171.15ffbdd0.chunk.js.map